{% extends "base.html" %}

{% block title %}取引の{% if transaction.id %}更新{% else %}追加{% endif %}{% endblock %}

{% block body %}

{% if transaction.error_msg %}
<p>{{ transaction.error_msg }}</p>
{% endif %}

<form method="post" action="">

    <input type='hidden' name='id' value='{{ transaction.id }}' />

<table>
    <tr><th><label for="id_date">Date:</label></th><td><input type="text" name="date" value="{{ transaction.date }}" required id="id_date" /></td></tr>

    <tr><th><label for="id_debit">Debit:</label></th><td><select name="debit" required id="id_debit">
        <option value="">---------</option>
        {% for account in accounts %}
        {% if account.id == transaction.debit_id %}
        <option value="{{ account.id }}" selected>{{ account.name }}</option>
        {% else %}
        <option value="{{ account.id }}">{{ account.name }}</option>
        {% endif %}
        {% endfor %}
        </td></tr>

    <tr><th><label for="id_credit">Credit:</label></th><td><select name="credit" required id="id_credit">
        <option value="">---------</option>
        {% for account in accounts %}
        {% if account.id == transaction.credit_id %}
        <option value="{{ account.id }}" selected>{{ account.name }}</option>
        {% else %}
        <option value="{{ account.id }}">{{ account.name }}</option>
        {% endif %}
        {% endfor %}
        </td></tr>

    <tr><th><label for="id_amount">Amount:</label></th><td><input type="number" name="amount" required id="id_amount" value="{{ transaction.amount }}" /></td></tr>

    <tr><th><label for="id_note">Note:</label></th><td><input type="text" name="note" maxlength="64" id="id_note" value="{{ transaction.note }}" /></td></tr>

    <tr><th><label for="id_start">Start:</label></th><td><input type="text" name="start" id="id_start" value="{% if transaction.start is string %}{{ transaction.start }}{% elif transaction.start is not none %}{{ transaction.start.strftime('%Y-%m') }}{% endif %}" /> (形式: YYYY-MM)</td></tr>

    <tr><th><label for="id_end">End:</label></th><td><input type="text" name="end" id="id_end" value="{% if transaction.end is string %}{{ transaction.end }}{% elif transaction.end is not none %}{{ transaction.end.strftime('%Y-%m') }}{% endif %}" /> (形式: YYYY-MM)</td></tr>

    <tr><td colspan='2'><input type="submit" value="{% if transaction.id %}更新{% else %}追加{% endif %}"></td></tr>
</table>
</form>

{% endblock %}
